# P+ Dashboard Configuration Guide

## 🔧 تنظیمات و پیکربندی

### 📁 فایل‌های مهم

#### **✅ فایل‌هایی که در Git نگهداری می‌شوند:**
- `pplus.sqlite3` - دیتابیس اصلی با تمام داده‌ها و تنظیمات
- `app.py` - فایل اصلی برنامه
- `db.py` - مدیریت دیتابیس
- `routes/` - مسیرهای برنامه
- `templates/` - قالب‌های HTML
- `static/` - فایل‌های استاتیک

#### **❌ فایل‌هایی که نادیده گرفته می‌شوند:**
- `*.log` - فایل‌های لاگ
- `__pycache__/` - فایل‌های Python cache
- `.env.local` - متغیرهای محیطی محلی
- `*.backup` - فایل‌های پشتیبان

### 🗄️ دیتابیس

#### **محافظت از داده‌ها:**
```bash
# دیتابیس اصلی در Git نگهداری می‌شود
pplus.sqlite3 ✅

# فایل‌های پشتیبان نادیده گرفته می‌شوند
pplus.sqlite3.backup ❌
*.sqlite3.backup ❌
```

#### **تنظیمات دیتابیس:**
- **مسیر**: `pplus.sqlite3` (پیش‌فرض)
- **متغیر محیطی**: `PPLUS_DB_PATH`
- **پشتیبان‌گیری**: خودکار در هر تغییر

### 🔐 متغیرهای محیطی

#### **فایل `.env.local` (ایجاد کنید):**
```bash
# کپی کردن فایل نمونه
cp .env.example .env.local

# ویرایش تنظیمات
nano .env.local
```

#### **متغیرهای مهم:**
```bash
# دیتابیس
PPLUS_DB_PATH=pplus.sqlite3

# امنیت
WEBHOOK_SECRET=your_secret_here

# API Keys (اختیاری)
ETHERSCAN_API_KEY=your_key_here
COVALENT_API_KEY=your_key_here
BLOCKCYPHER_API_KEY=your_key_here
```

### 🚀 راه‌اندازی

#### **1. نصب وابستگی‌ها:**
```bash
pip install -r requirements.txt
```

#### **2. تنظیم متغیرهای محیطی:**
```bash
# کپی فایل نمونه
cp .env.example .env.local

# ویرایش تنظیمات
nano .env.local
```

#### **3. راه‌اندازی دیتابیس:**
```bash
python -c "from db import ensure_db; ensure_db()"
```

#### **4. اجرای برنامه:**
```bash
python app.py
```

### 📊 داده‌های محافظت شده

#### **✅ در Git نگهداری می‌شوند:**
- **تنظیمات کاربر**: نرخ تبدیل، آدرس کیف پول‌ها
- **معاملات**: خریدها و فروش‌ها
- **واریزها**: واریزهای BTC و USD
- **پورتفولیو**: کیف پول‌ها، اهداف، محدودیت‌ها

#### **🔄 همگام‌سازی:**
- **Push**: تنظیمات و داده‌ها به سرور
- **Pull**: دریافت آخرین تغییرات
- **Merge**: ادغام تغییرات بدون از دست دادن داده

### ⚠️ نکات مهم

#### **1. همیشه قبل از تغییرات:**
```bash
# پشتیبان‌گیری
cp pplus.sqlite3 pplus.sqlite3.backup

# بررسی وضعیت
git status
```

#### **2. در صورت مشکل:**
```bash
# بازگردانی از پشتیبان
cp pplus.sqlite3.backup pplus.sqlite3

# بازگردانی از Git
git checkout HEAD -- pplus.sqlite3
```

#### **3. تنظیمات جدید:**
- **آدرس کیف پول‌ها**: در تنظیمات برنامه
- **نرخ تبدیل**: در تنظیمات برنامه
- **API Keys**: در فایل `.env.local`

### 🎯 نتیجه

**تمام تنظیمات و داده‌های مهم شما محافظت شده و در Git نگهداری می‌شوند!**

**هیچ تنظیماتی ریست نخواهد شد!** ✅
